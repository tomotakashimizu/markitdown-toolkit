# Markdown マージツール

複数の Markdown ファイルを指定数ごとにまとめて一つのファイルに結合する Python ツールです。

## 機能

- 複数の Markdown ファイルを指定数ごとにまとめて一つのファイルに結合
- カスタム区切り文字で各ファイルを分離
- ファイル名をヘッダーとして追加するオプション
- 結合ファイルのプレフィックスとタイムスタンプ付きの命名
- 出力先ディレクトリの柔軟な指定
- 様々なファイルパターンのサポート

## 必要条件

- Python 3.6 以上

## インストール

### スクリプトの実行権限を設定（Unix/Linux/Mac 環境）

```bash
chmod +x merge_n_markdown.py
```

## 使い方

### 基本的な使用方法

```bash
python merge_n_markdown.py <入力ディレクトリ> [オプション]
```

または実行権限を設定した場合：

```bash
./merge_n_markdown.py <入力ディレクトリ> [オプション]
```

### コマンドラインオプション

| オプション           | 説明                                                             |
| -------------------- | ---------------------------------------------------------------- |
| `<入力ディレクトリ>` | マージする Markdown ファイルが含まれるディレクトリのパス（必須） |
| `-o, --output`       | 出力ディレクトリのパス（デフォルト: 入力ディレクトリと同じ）     |
| `-n`                 | 一度にまとめるファイル数（デフォルト: 10）                       |
| `-p, --pattern`      | 対象とするファイルのパターン（デフォルト: "\*.md"）              |
| `-d, --delimiter`    | ファイル間の区切り文字（デフォルト: "\_\_\_"）                   |
| `--prefix`           | 出力ファイル名のプレフィックス（デフォルト: "merged"）           |
| `--header`           | 各ファイルの前にファイル名をヘッダーとして含める                 |
| `-q, --quiet`        | 詳細な出力を抑制する                                             |
| `-h, --help`         | ヘルプメッセージを表示する                                       |

### 使用例

#### 基本的な使用法（デフォルト設定）

```bash
python merge_n_markdown.py markdown_dir/
```

#### カスタマイズした使用法

```bash
python merge_n_markdown.py markdown_dir/ -o merged_output/ -n 5 -d "---" --header --prefix "combined"
```

この例では：

- 5 つのファイルごとにマージ
- "---" を区切り文字として使用
- 各ファイルの前にファイル名をヘッダーとして追加
- "combined_YYYYMMDD_1.md" 形式の出力ファイル名を使用

#### 特定のファイルパターンのみを対象にする

```bash
python merge_n_markdown.py docs/ -p "chapter*.md" --header
```

## 出力

- 指定されたディレクトリ（または入力ディレクトリ）に、`prefix_YYYYMMDD_N.md`（例：`merged_20240920_1.md`）という形式のファイルを作成
- `N`は 1 から始まるグループ番号

## 注意事項

- 入力ディレクトリが存在しない場合はエラーメッセージが表示されます
- 指定されたパターンに一致するファイルがない場合も警告が表示されます
